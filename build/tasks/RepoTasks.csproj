<Project Sdk="Microsoft.NET.Sdk">
  <!-- <Import Project="..\dependencies.props" /> -->
  <PropertyGroup>
    <TargetFramework>netstandard2.0</TargetFramework>
    <IsPackable>false</IsPackable>
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Include="Microsoft.Build.Framework" PrivateAssets="All" Version="$(MSBuildPackageVersion)" />
    <PackageReference Include="Microsoft.Build.Utilities.Core" PrivateAssets="All" Version="$(MSBuildPackageVersion)" />
    <PackageReference Include="NerdBank.GitVersioning" PrivateAssets="All" Version="$(NerdBankGitVersioningPackageVersion)" />
  </ItemGroup>

<!-- 
****************************************************************************
  Write the git commit id and the NuGetPackage Version generated by 
  NerdBank.

  This is needed for the Shim Generation to define the path of executable.
****************************************************************************
  -->

  <Target Name="WriteRepoInfo" AfterTargets="GetBuildVersion">
    <ItemGroup>
      <RepoInformationFile Include="RepoInfo.props" />
      <RepoInfo Include="
&lt;Project&gt;
  &lt;PropertyGroup&gt;
    &lt;PackageVersion&gt;$(NuGetPackageVersion)&lt;/PackageVersion&gt;
    &lt;GitCommitId&gt;$(GitCommidIdShort)&lt;/GitCommitId&gt;
  &lt;/PropertyGroup&gt;
&lt;/Project&gt;" />
    </ItemGroup>

    <WriteLinesToFile File="@(RepoInformationFile)"
                      Lines="@(RepoInfo)"
                      Overwrite="true"
                      Encoding="Unicode" />
  </Target>

</Project>